"use strict";function _typeof(o){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(o)}!function(o){window.wfob_storage={variation_data:{}};var t=0===parseFloat(wfob_frontend.cart_total),a={message:null,overlayCSS:{background:"#fff",opacity:.6}},e=o("form.checkout");function n(a){a.hasOwnProperty("cart_total")&&0==parseFloat(a.cart_total)?(t=!0,_()):t?(t=!1,_()):(a.hasOwnProperty("fragments")&&a.fragments.hasOwnProperty(".cart_total")&&0===parseFloat(a.fragments[".cart_total"])&&(o(document.body).trigger("wfob_cart_goes_empty",{cart_total:parseFloat(a.cart_total)}),_()),a.hasOwnProperty("fragments")&&o.each(a.fragments,function(t,a){o(t).replaceWith(a)})),o(document.body).trigger("wfob_bump_trigger",a)}window.wfob_send_ajax=function(t,a){var e=wfob_frontend.admin_ajax;t.hasOwnProperty("url")&&(e=t.url),t.action="wfob_"+t.action,wfob_frontend.hasOwnProperty("wc_endpoints")&&wfob_frontend.wc_endpoints.hasOwnProperty(t.action)&&(e=wfob_frontend.wc_endpoints[t.action]),t.wfob_nonce=wfob_frontend.wfob_nonce,o.ajax({url:e,type:t.type,data:t,success:function(o){"function"==typeof a&&a(o),"object"==_typeof(o)&&o.hasOwnProperty("nonce")&&(wfob_frontend.wfob_nonce=o.nonce)}})},o(document.body).on("update_checkout",function(t){o(document).off("change",".wfob_bump_product").on("change",".wfob_bump_product",function(){var t=o(this),r=o(this).parents(".wfob_bump"),i=r.data("wfob-id");i=parseInt(i);var c=r.data("product-key"),f=r.attr("cart_key"),d="remove_order_bump";o(this).is(":checked")&&(d="add_order_bump",f="");var s=0,w=o("._wfob_post_id");w.length>0&&(s=w.val()),e.block(a),wfob_send_ajax({action:d,type:"post",product_key:c,wfob_id:i,cart_key:f,wfob_post_id:s,post_data:o("form.checkout").serialize()},function(o){e.unblock(),!0!==o.cart_is_empty?(!0===o.status?o.hasOwnProperty("new_item")&&""!==o.new_item&&r.attr("cart_key",o.new_item):"add_order_bump"===d&&(o.hasOwnProperty("error")&&""!==o.error&&r.find(".wfob_error_message").html(o.error),t.prop("checked",!1)),n(o),1==o.gateways_change&&_()):window.location.reload(0)})})}),o(document).ready(function(){function t(){var t=o(".variations_form");t.on("hide_variation",function(t){o(".wfob_single_add_to_cart_button").hide(),o(".wfob_qv-summary .quantity").hide(),o(".wfob_option_btn").show(),o("#wfob_qr_model_wrap .wfob_option_btn").click(function(){o(".wfob_qv-main table.variations").length>0&&o(".wfob_qv-main").animate({scrollTop:o("table.variations").offset().top-100},2e3),o("form.variations_form.cart .variations").removeClass("wfob_animate_shake"),setTimeout(function(){o("form.variations_form.cart .variations").addClass("wfob_animate_shake")},500)})}),t.on("show_variation",function(t,a){var e=a.variation_id;wfob_storage.variation_data[e]=a,o(".wfob_single_add_to_cart_button").show(),o(".wfob_qv-summary .quantity").show(),o(".wfob_option_btn").hide()})}function r(t,a){o(".wfob_qv-inner-modal").css("opacity","0").addClass(a)}function i(a,e){!function(a,e,n,r){a.action="quick_view_ajax",a.type="post",wfob_send_ajax(a,function(i){if(1==i.status){o(".wfob_qv-modal").html(i.html),e(n,r),o(".wfob_qv-pl-active").removeClass("wfob_qv-pl-active"),wc_single_product_params.flexslider_enabled=!0,wc_single_product_params.photoswipe_enabled=!0,wc_single_product_params.zoom_enabled=!0,o(".woocommerce-product-gallery").each(function(){o(this).wc_product_gallery()}),o(".wfob_qv-panel").find(".variations_form").wc_variation_form(),o(".wfob_qv-panel .variations_form select").change(),a.hasOwnProperty("variation_id")&&function(t,a){if(!window.wfob_storage.variation_data.hasOwnProperty(t))return!1;var e=window.wfob_storage.variation_data[t];if(0===Object.keys(e).length)return!1;var n=e.attributes;if(0===Object.keys(n).length)return!1;for(var r in n){var i=o('[data-attribute_name="'+r+'"]');if(i.length>0){var _=n[r];i.val(_)}}}(a.variation_id,a.item_key),t();var _=o('.wfob_bump[data-product-key="'+a.item_key+'"]');if(o(document.body).trigger("wfob_quick_view_open",{data:i}),0===_.length)return;var c=o(".wfob_qv-summary .price");if(c.length>0){var f=_.find(".wfob_price").html();c.html(f)}}else o(".wfob_qv-close").trigger("click")})}(a,r,null,"wfob_qv-animation-fadein")}function c(t){t.preventDefault(),o.each(t.target.classList,function(t,a){"wfob_qv-close"!==a&&"wfob_qv-inner-modal"!==a||(o(".wfob_qv-opac").hide(),o(".wfob_qv-panel").removeClass("wfob_qv-panel-active"),o(".wfob_qv-modal").html(""))})}function f(t){var r=o(".wfob_qv-summary .variation_id").val();r>0&&t.attr("variation_id",r);var i=function(t){if(!window.wfob_storage.variation_data.hasOwnProperty(t))return{};var a=window.wfob_storage.variation_data[t];if(0===Object.keys(a).length)return{};var e=a.attributes;if(0===Object.keys(e).length)return{};var n={};for(var r in e){var i=o('[data-attribute_name="'+r+'"]');i.length>0&&(n[r]=i.val(),window.wfob_storage.variation_data[t].attributes[r]=i.val())}return n}(r),c=t.attr("cart_key"),f=t.data("wfob-id"),d=t.data("product-key");e.block(a);var s=0,w=o("._wfob_post_id");w.length>0&&(s=w.val()),wfob_send_ajax({action:"add_order_bump",type:"post",remove_item_key:c,product_key:d,variation_id:r,attributes:i,wfob_id:f,wfob_post_id:s,post_data:o("form.checkout").serialize()},function(a){if(e.unblock(),!0!==a.cart_is_empty)if(a.hasOwnProperty("error")&&""!==a.error)t.find(".wfob_error_message").html(a.error);else{a.hasOwnProperty("new_item")&&""!==a.new_item&&t.attr("cart_key",a.new_item);var r=o("#product_switcher_need_refresh");r.length>0&&r.val(0),n(a),1==a.gateways_change&&_()}else window.location.reload(0)})}o(".wfob_qv-panel").on("click",".wfob_qv-close",c),o(document.body).on("click",".wfob_qv-inner-modal",c),o(document).keyup(function(t){27===t.keyCode&&o(".wfob_qv-close").trigger("click")}),o(document.body).on("click",".wfob_qv-button",function(t){t.preventDefault();var a=o(this).parents(".wfob_bump");o(".wfob_qv-opac").show();var e=o(".wfob_qv-panel");e.addClass("wfob_qv-panel-active"),e.find(".wfob_qv-opl").addClass("wfob_qv-pl-active");var n=o(this).attr("qv-id"),r={};a.length>0&&(r.item_key=a.data("product-key"),r.cart_key=a.attr("cart_key")),r.wfob_id=a.data("wfob-id"),r.wfob_nonce=wfob_frontend.wfob_nonce,r.product_id=n;var _=o(this).attr("qv-var-id");void 0!=_&&(r.variation_id=_),i(r)}),o(document).on("click",".wfob_single_add_to_cart_button",function(){var t=o(".wfob_qv-inner-modal"),a=t.data("item-key"),e=t.data("cart-key"),n=!1;if(o(".wfob_qv-summary .variations_form").length>0&&(n=!0),void 0!==e&&""!==e){var r=o('.wfob_bump[cart_key="'+e+'"]');r.length>0&&(!0===n&&f(r),o(".wfob_qv-close").trigger("click"))}else if(void 0!==a&&""!==a){var i=o('.wfob_bump[data-product-key="'+a+'"]');i.length>0&&(!0===n&&f(i),o(".wfob_qv-close").trigger("click"))}}),o(document).on("change",".wfob_choose_variation",function(){var t=o(this).parents(".wfob_bump").find(".wfob_qv-button");t.length>0&&t.trigger("click"),o(this).prop("checked",!1)})});var r,i=null;function _(){clearTimeout(i),i=setTimeout(function(){o(document.body).trigger("update_checkout")},1e3)}o(document.body).on("updated_checkout",function(a,e){var n=o("#product_switcher_need_refresh");n.length>0&&n.val(1),"object"==_typeof(e)&&e.hasOwnProperty("fragments")&&e.fragments.hasOwnProperty("cart_total")&&0===parseFloat(e.fragments.cart_total)&&(t=!0,window.location.reload())}),r=!1,o(document.body).on("wfob_bump_trigger",function(){var t=o("#payment_method_woo-mercado-pago-custom");t.length>0&&"woo-mercado-pago-custom"===t.val()&&(r=!0,o(document.body).trigger("update_checkout"))}),e.on("click",'input[name="payment_method"]',function(){"woo-mercado-pago-custom"===o(this).val()&&"object"==("undefined"==typeof MPv1?"undefined":_typeof(MPv1))&&1==r&&(MPv1.guessingPaymentMethod({event:"keyup"}),r=!1)}),o(document.body).on("wfob_cart_goes_empty",function(){t=!0})}(jQuery);
;