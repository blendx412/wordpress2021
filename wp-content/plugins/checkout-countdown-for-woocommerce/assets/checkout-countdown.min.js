function ccfwooCounter(){if(!ccfwooController.hasCart())return ccfwooController.setHtml("banner"),ccfwooController.classes("remove","checkout-countdown-is-counting"),void ccfwooController.stopInterval(!0);const o=ccfwooGetDurationRange(),e=ccfwooFormatDuration(o.start,o.end);!0===e.isPast?(ccfwooController.setHtml("loading"),ccfwooController.stopInterval(!0),ccfwooController.triggerEvent("document","ccfwooReachedZero",!0),setTimeout(function(){ccfwooController.isCounting()||(ccfwooController.triggerEvent("document","ccfwooFinishedCounting",!0),ccfwooController.setHtml("expired"))},1e3),setTimeout(function(){ccfwooController.isCounting()||ccfwooController.setHtml("banner")},6e3)):ccfwooController.setHtml("counting",!1,e)}function ccfwooUpdateCountingHTML(o,e){if(o){var t=ccfwooLocal.countdown_text.replace("{minutes}",e.minutes),n=t.replace("{seconds}",e.seconds);o.innerHTML=n}}function ccfwooLoadingHTML(o){o&&(o.innerHTML=ccfwooLocal.loading_html)}function ccfwooBannerHTML(o){o&&("on"===ccfwooLocal.enable_banner_message&&(o.innerHTML=ccfwooLocal.banner_message_text),"on"!==ccfwooLocal.enable_banner_message&&(o.innerHTML=ccfwooLocal.loading_html,ccfwooController.classes("add","ccfwoo-is-hidden")))}function ccfwooFinishedCountingHTML(o){o&&(o.innerHTML=ccfwooLocal.expired_text)}function ccfwooGetDurationRange(){const o=new Date;var e=!!localStorage.getItem("ccfwoo_end_date")&&localStorage.getItem("ccfwoo_end_date");e=e?new Date(e):ccfwooController.setNewDate();const t={start:o,end:e};return t}function ccfwooFormatDuration(o,e){let t=new Date(e)-new Date(o),n=Number.isInteger(t),c=Math.floor(t/1e3/60/60/24/7),r=Math.floor(t/1e3/60/60/24-7*c),s=Math.floor(t/1e3/60/60-7*c*24-24*r),a=Math.floor(t/1e3/60-7*c*24*60-24*r*60-60*s),i=Math.floor(t/1e3-7*c*24*60*60-24*r*60*60-60*s*60-60*a),l=Math.floor(t-7*c*24*60*60*1e3-24*r*60*60*1e3-60*s*60*1e3-60*a*1e3-1e3*i),f=t/1e3<=0,u={milliseconds:l,seconds:ccfwooLeadingZero(i),minutes:ccfwooLeadingZero(a),hours:s,days:r,weekdays:c,totalSeconds:t/1e3,isPast:f,ValidDates:n};return u}function ccfwooGetCookie(o){var e=document.cookie.match(new RegExp("(^| )"+o+"=([^;]+)"));if(e)return e[2]}function ccfwooLeadingZero(o){if("on"===ccfwooLocal.leading_zero){const e=2;for(o=o.toString();o.length<e;)o="0"+o;return o}return o}var ccfwooController={counting:!1,cartItems:ccfwooLocal.cart_count,cart:0,interval:!1,htmlElements:!1,config:ccfwooLocal,setElements:function(o){const e=o||"checkout-countdown-wrapper",t=document.getElementsByClassName(e);return this.htmlElements=t,t},getElements:function(){return this.htmlElements},setHtml:function(o,e,t){if(e=e||this.htmlElements,t=t||!1,!e||!o)return!1;var n;for(n=0;n<e.length;n++){const c=e[n].firstElementChild;"loading"===o&&ccfwooLoadingHTML(c),"counting"===o&&ccfwooUpdateCountingHTML(c,t),"expired"===o&&ccfwooFinishedCountingHTML(c),"banner"===o&&ccfwooBannerHTML(c)}return!0},isCounting:function(){return this.counting},hasCart:function(){return this.cartItems>=1},getCartItems:function(){return this.cartItems},setCartItems:function(o){this.cartItems=o},setIsCounting:function(o){!1===o?ccfwooController.classes("remove","checkout-countdown-is-counting"):(ccfwooController.classes("add","checkout-countdown-is-counting"),ccfwooController.classes("remove","ccfwoo-is-hidden")),this.counting=o},stopInterval:function(o){!0===o&&localStorage.removeItem("ccfwoo_end_date"),this.setIsCounting(!1),clearInterval(this.interval)},startInterval:function(){this.hasCart()?this.setIsCounting(!0):this.setIsCounting(!1),this.interval=setInterval(ccfwooCounter,1e3)},restartInterval:function(){this.stopInterval(!0),this.setHtml("loading"),this.startInterval()},setNewDate:function(o){const e=o||60*ccfwooLocal.ccfwoo_minutes;return date=new Date,date.setSeconds(date.getSeconds()+e),localStorage.setItem("ccfwoo_end_date",date),date},triggerEvent:function(o,e){if(e=new Event(e,{bubbles:!0}),"document"===o&&document.dispatchEvent(e),"window"===o&&window.dispatchEvent(e),"body"===o){var t=document.getElementsByTagName("BODY")[0];t.dispatchEvent(e)}},classes:function(o,e,t){if(elements=this.htmlElements,!elements)return!1;var n;for(n=0;n<elements.length;n++)"add"===o&&elements[n].classList.add(e),"remove"===o&&elements[n].classList.remove(e),"replace"===o&&t&&(elements[n].classList.remove(e),elements[n].classList.add(t))}};document.addEventListener("DOMContentLoaded",function(o){ccfwooController.setElements();const e=ccfwooGetCookie("woocommerce_items_in_cart");cookieCart=e&&e>=1?1:0,ccfwooController.setCartItems(cookieCart),ccfwooCounter(),ccfwooController.startInterval(),ccfwooController.isCounting()&&ccfwooController.classes("add","checkout-countdown-is-counting")}),document.addEventListener("ccfwooFinishedCounting",function(o){ccfwooController.classes("remove","checkout-countdown-is-counting")});